# SPEC-027: 例行面板重新设计

> 起草日期: 2026-01-07
> 状态: 已完成

## 背景

当前例行面板需要优化：
- 粉色配色与整体风格不协调
- 关闭按钮 × 不够直观
- 面板位置居中，远离触发按钮
- 底部按钮过多

---

## 变更项

### 1. 移除粉色配色

**当前**: 输入框焦点、添加按钮使用粉色渐变 (#f093fb → #f5576c)

**改为**: 统一使用蓝紫色渐变 (#667eea → #764ba2)

**涉及样式**:
```css
/* 输入框焦点 */
.routine-footer input:focus {
    border-color: #667eea;  /* 原 #f5576c */
    box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
}

/* 添加按钮 */
.btn-add-routine {
    background: linear-gradient(135deg, #667eea, #764ba2);  /* 原 #f093fb, #f5576c */
}
```

---

### 2. 右上角关闭按钮改为"确认"

**当前**: `×` 关闭按钮

**改为**: `确认` 按钮，点击后关闭面板

**示意**:
```
┌─────────────────────────────────────┐
│ 🔥 你真是强的可怕           [确认]  │
├─────────────────────────────────────┤
```

**样式**: 蓝色毛玻璃效果，与之前 SPEC-026 的确认按钮一致

---

### 3. 底部只保留加号按钮

**当前**: 输入框 + 加号按钮 + 确认按钮

**改为**: 输入框 + 加号按钮

**示意**:
```
├─────────────────────────────────────┤
│ [添加例行任务...]              [+]  │
└─────────────────────────────────────┘
```

---

### 4. 面板悬浮在"例行"按钮附近

**当前**: 面板居中显示 (position: fixed, 居中对齐)

**改为**: 面板悬浮在"例行"按钮下方

**实现方式**:
- 移除 overlay 的 `justify-content: center; align-items: center;`
- 面板使用绝对定位，参考"例行"按钮位置
- 或改为 dropdown 形式

**示意**:
```
┌──────────────────────────────────────────────────┐
│  [例行]  [Today]  [This Week]  [Next 30 Days]    │
│     ↓                                            │
│  ┌─────────────────────────┐                     │
│  │ 🔥 你真是强的可怕 [确认] │                     │
│  ├─────────────────────────┤                     │
│  │  □ 例行任务1             │                     │
│  │  □ 例行任务2             │                     │
│  ├─────────────────────────┤                     │
│  │ [添加...]          [+]  │                     │
│  └─────────────────────────┘                     │
```

---

## 实现清单

| # | 改动 | 文件 |
|---|------|------|
| 1 | 输入框焦点颜色改为蓝色 | todo.html (CSS) |
| 2 | 加号按钮颜色改为蓝色 | todo.html (CSS) |
| 3 | 关闭按钮改为"确认"按钮 | todo.html (HTML) |
| 4 | 确认按钮样式（蓝色毛玻璃） | todo.html (CSS) |
| 5 | 移除底部确认按钮 | todo.html (HTML) |
| 6 | 面板定位改为悬浮于"例行"按钮下方 | todo.html (CSS) |
| 7 | 删除 confirmRoutinePanel 函数（复用 toggleRoutinePanel） | todo.html (JS) |

---

## 验收标准

1. 面板无粉色元素
2. 右上角显示"确认"按钮（蓝色毛玻璃）
3. 点击"确认"关闭面板
4. 底部只有输入框和加号按钮
5. 面板悬浮在"例行"按钮正下方
6. 点击面板外区域可关闭面板
