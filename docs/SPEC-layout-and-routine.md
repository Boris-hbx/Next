# SPEC: 布局对齐 + 每日例行功能

## 问题汇总

### 问题1: 名言栏未对齐
名言栏宽度与下方 Tabs 行不一致，视觉上不整齐。

### 问题2: 缺少每日例行功能
需要一个"每日例行"入口，显示重复性任务。

### 问题3: 四象限高度未自适应
即使任务数 < 15，象限仍然占据大量空白空间。原因：grid 使用 `1fr 1fr` 等高分配。

---

## 解决方案

### 方案1: 名言栏对齐

```
【当前】
┌────────────────────────────────────────────────────────┐
│          「名言内容...」              [换一个]          │
└────────────────────────────────────────────────────────┘
┌──────────────────────────────────┐              ┌──────────┐
│ Today | This Week | Next 30 Days │              │ +添加任务 │
└──────────────────────────────────┘              └──────────┘
        ↑ 不对齐

【期望】
          ┌────────────────────────────────────────┐
          │    「名言内容...」           [换一个]   │
          └────────────────────────────────────────┘
          ┌──────────────────────────────┐ ┌──────────┐
          │ Today | This Week | Next 30  │ │ +添加任务 │
          └──────────────────────────────┘ └──────────┘
          ↑                                         ↑
       左对齐                                    右对齐
```

**实现**: 名言栏宽度 = 四象限宽度 (1364px)，与 Tabs 行相同。

### 方案2: 每日例行按钮

在 Tabs 左侧添加"每日例行"按钮：

```
┌────────┐ ┌───────────────────────────────┐     ┌──────────┐
│📋 例行 │ │ Today | This Week | Next 30   │     │ +添加任务 │
└────────┘ └───────────────────────────────┘     └──────────┘
    ↑
  新按钮
```

**点击行为**:
- 显示一个独立面板/弹窗
- 标题: "你真是强的可怕"
- 内容: 每日例行任务列表（可勾选完成）
- 每天重置完成状态

**数据结构**:
```json
{
  "routines": [
    { "id": "r1", "text": "晨间锻炼", "completed_today": false },
    { "id": "r2", "text": "阅读30分钟", "completed_today": false }
  ]
}
```

### 方案3: 四象限高度自适应

**问题原因**: Grid 使用 `grid-template-rows: 1fr 1fr` 导致两行等高。

**解决方案**: 改为 `auto auto`，让每行高度由内容决定，同时设置 `min-height` 保证最小高度。

```css
.matrix-grid {
    grid-template-rows: auto auto;  /* 内容决定高度 */
}

.quadrant {
    min-height: 200px;  /* 最小高度，避免太扁 */
}
```

```
【当前 1fr 1fr】              【期望 auto auto】
┌─────────┬─────────┐        ┌─────────┬─────────┐
│ Q1      │ Q2      │        │ Q1      │ Q2      │
│ 10任务  │ 2任务   │        │ 10任务  │ 2任务   │
│         │ (空白)  │        │         │         │
├─────────┼─────────┤        ├─────────┼─────────┤
│ Q3      │ Q4      │        │ Q3 1任务│ Q4 1任务│
│ 1任务   │ 1任务   │        └─────────┴─────────┘
│ (空白)  │ (空白)  │              ↑
└─────────┴─────────┘         高度自适应
      ↑
  等高，有空白
```

---

## 实现清单

| # | 改动 | 文件 |
|---|------|------|
| 1 | 名言栏宽度设为 1364px，居中对齐 | style.css |
| 2 | 添加"每日例行"按钮 HTML | todo.html |
| 3 | 例行面板样式 | style.css |
| 4 | 例行面板 JS 交互 | todo.html |
| 5 | 后端例行任务 API | app.py |
| 6 | Grid rows 改为 auto auto | style.css |
| 7 | Quadrant 添加 min-height | style.css |

## 验收标准

1. 名言栏与 Tabs 行左右对齐
2. "每日例行"按钮可见，点击弹出面板
3. 例行面板标题为"你真是强的可怕"
4. 四象限高度随内容自适应，无大片空白
5. 每个象限最小高度 200px
