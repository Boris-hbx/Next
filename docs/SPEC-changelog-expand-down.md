# SPEC: 变更记录向下延展

## 问题

点击"变更记录"展开时，整个弹窗会发生尺寸变化，产生震荡感。

## 目标

变更记录展开时，只向下延展，弹窗上部保持稳定。

## 当前行为

```
【折叠】                      【展开】
┌─────────────────────┐      ┌─────────────────────┐
│ 标题栏              │      │ 标题栏              │ ← 位置变了！
├─────────────────────┤      ├─────────────────────┤
│ 属性 │ 内容         │      │ 属性 │ 内容         │
│      │              │  →   │      │              │
├─────────────────────┤      ├─────────────────────┤
│ ▶ 变更记录          │      │ ▼ 变更记录          │
├─────────────────────┤      │ · 01-05 进度更新    │
│ [取消] [保存]       │      │ · 01-04 移动象限    │
└─────────────────────┘      ├─────────────────────┤
                             │ [取消] [保存]       │
                             └─────────────────────┘
```

## 期望行为

```
【折叠】                      【展开】
┌─────────────────────┐      ┌─────────────────────┐
│ 标题栏              │      │ 标题栏              │ ← 位置不变
├─────────────────────┤      ├─────────────────────┤
│ 属性 │ 内容         │      │ 属性 │ 内容         │
│      │              │  →   │      │              │
├─────────────────────┤      ├─────────────────────┤
│ ▶ 变更记录          │      │ ▼ 变更记录          │
├─────────────────────┤      │ · 01-05 进度更新    │
│ [取消] [保存]       │      │ · 01-04 移动象限    │
└─────────────────────┘      ├─────────────────────┤
         ↑                   │ [取消] [保存]       │
     固定位置                └─────────────────────┘
                                      ↑
                                  向下延展
```

## 实现方案

### 方案：弹窗顶部对齐

弹窗使用 `align-items: flex-start` 而非居中，确保顶部位置固定：

```css
.task-modal-overlay {
    align-items: flex-start;  /* 顶部对齐 */
    padding-top: 10vh;        /* 距顶部留白 */
}

.task-modal {
    max-height: 85vh;         /* 最大高度 */
    /* 移除固定高度，让内容决定高度 */
}

/* 变更记录展开动画 */
.changelog-list {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
}

.changelog-toggle.expanded + .changelog-list,
.changelog-section.expanded .changelog-list {
    max-height: 200px;
    overflow-y: auto;
}
```

### 关键点

1. **弹窗顶部固定**: 使用 `align-items: flex-start`
2. **平滑过渡**: changelog-list 使用 `max-height` 过渡
3. **内容滚动**: 展开后 changelog 内部滚动，不撑开整个弹窗

---

## 实现清单

| # | 改动 | 文件 |
|---|------|------|
| 1 | 弹窗 overlay 改为顶部对齐 | todo.html |
| 2 | changelog-list 添加 max-height 过渡 | todo.html |

## 验收标准

1. 点击"变更记录"时，弹窗上部位置不变
2. 变更记录区域向下平滑展开
3. 展开后内容超出时可滚动
4. 收起时平滑收回
